{
  "prd": {
    "hash": "c6789bc46bb4ee8bb02b1796f96a72b90b0358cf3eef9fac099756ba0aca2ff3",
    "source": "pasted-prd.md"
  },
  "generatedAt": "2026-02-21T06:47:45.806Z",
  "plan": [
    {
      "id": "step-types-1",
      "title": "Add 'delivered_at' field to parcel type",
      "description": "Extend the parcel type definition to include the 'delivered_at' field.",
      "area": "Types",
      "kind": "modify",
      "files": {
        "modify": [
          "src/types/parcel.ts"
        ],
        "create": [],
        "touch": []
      },
      "dependsOnStepIds": [],
      "rationale": [
        "The 'delivered_at' field is needed for both UI display and API integration."
      ],
      "implementationChecklist": [
        "Add 'delivered_at' field to the Parcel type definition.",
        "Ensure the field is optional and can be null."
      ],
      "doneWhen": [
        "'delivered_at' field is present in the Parcel type and TypeScript compiles without errors."
      ],
      "durationHours": 0.5
    },
    {
      "id": "step-api-1",
      "title": "Update parcel API to include 'delivered_at' field",
      "description": "Modify the parcel API service to handle the 'delivered_at' field in responses.",
      "area": "API/Service",
      "kind": "modify",
      "files": {
        "modify": [
          "src/services/parcelAPI.ts"
        ],
        "create": [],
        "touch": [
          "src/types/parcel.ts"
        ]
      },
      "dependsOnStepIds": [
        "step-types-1"
      ],
      "rationale": [
        "API needs to provide the 'delivered_at' data for the UI to display."
      ],
      "implementationChecklist": [
        "Ensure the API response includes the 'delivered_at' field.",
        "Update any relevant data transformation logic to handle 'delivered_at'."
      ],
      "doneWhen": [
        "API service returns 'delivered_at' field in parcel data."
      ],
      "durationHours": 2
    },
    {
      "id": "step-state-1",
      "title": "Update AuthSlice for Edit button permissions",
      "description": "Modify the AuthSlice to handle permissions for displaying the Edit button.",
      "area": "State",
      "kind": "modify",
      "files": {
        "modify": [
          "src/redux/slices/AuthSlice.ts"
        ],
        "create": [],
        "touch": [
          "src/hooks/useAuthorization.ts"
        ]
      },
      "dependsOnStepIds": [],
      "rationale": [
        "Permissions need to be checked to control the visibility of the Edit button."
      ],
      "implementationChecklist": [
        "Add logic to check if the user role is Admin or Ops.",
        "Ensure the state reflects the correct permissions for the Edit button visibility."
      ],
      "doneWhen": [
        "AuthSlice correctly determines permissions for the Edit button."
      ],
      "durationHours": 2
    },
    {
      "id": "step-hooks-1",
      "title": "Enhance useAuthorization hook for Edit Parcel screen",
      "description": "Modify the useAuthorization hook to include checks for accessing the Edit Parcel screen.",
      "area": "Hooks",
      "kind": "modify",
      "files": {
        "modify": [
          "src/hooks/useAuthorization.ts"
        ],
        "create": [],
        "touch": [
          "src/redux/slices/AuthSlice.ts"
        ]
      },
      "dependsOnStepIds": [
        "step-state-1"
      ],
      "rationale": [
        "Authorization checks are necessary to control access to the Edit Parcel screen."
      ],
      "implementationChecklist": [
        "Add logic to useAuthorization to check for Admin or Ops roles.",
        "Ensure the hook returns correct authorization status for the Edit Parcel screen."
      ],
      "doneWhen": [
        "useAuthorization correctly authorizes access to the Edit Parcel screen."
      ],
      "durationHours": 1
    },
    {
      "id": "step-routing-1",
      "title": "Add routing for Edit Parcel screen",
      "description": "Configure routing to include the new Edit Parcel screen.",
      "area": "Routing",
      "kind": "modify",
      "files": {
        "modify": [
          "src/config/navigation.ts"
        ],
        "create": [],
        "touch": [
          "src/pages/EditParcel.tsx"
        ]
      },
      "dependsOnStepIds": [
        "step-hooks-1"
      ],
      "rationale": [
        "Routing needs to be set up to navigate to the Edit Parcel screen."
      ],
      "implementationChecklist": [
        "Add a new route for the Edit Parcel screen in the navigation configuration.",
        "Ensure the route is wrapped with the Authorize component."
      ],
      "doneWhen": [
        "Edit Parcel screen is accessible via the configured route."
      ],
      "durationHours": 1
    },
    {
      "id": "step-ui-1",
      "title": "Create Edit Parcel screen",
      "description": "Develop the new Edit Parcel screen for editing parcel details.",
      "area": "UI",
      "kind": "create",
      "files": {
        "modify": [],
        "create": [
          "src/pages/EditParcel.tsx"
        ],
        "touch": [
          "src/components/authorize/Authorize.tsx"
        ]
      },
      "dependsOnStepIds": [
        "step-routing-1"
      ],
      "rationale": [
        "A new screen is needed for users to edit parcel details."
      ],
      "implementationChecklist": [
        "Create the EditParcel component with form fields for editable attributes.",
        "Include error handling and display logic for form submission."
      ],
      "doneWhen": [
        "Edit Parcel screen is functional and displays correctly."
      ],
      "durationHours": 4
    },
    {
      "id": "step-ui-2",
      "title": "Add 'Delivered At' column to Parcels page",
      "description": "Modify the Parcels page to include a new column for 'Delivered At'.",
      "area": "UI",
      "kind": "modify",
      "files": {
        "modify": [
          "src/pages/Parcels.tsx"
        ],
        "create": [],
        "touch": [
          "src/components/table/TableRenderer.tsx"
        ]
      },
      "dependsOnStepIds": [
        "step-api-1"
      ],
      "rationale": [
        "The 'Delivered At' column is a new requirement for the parcels table."
      ],
      "implementationChecklist": [
        "Add 'Delivered At' column to the table on the Parcels page.",
        "Ensure sorting and filtering capabilities are implemented for the new column."
      ],
      "doneWhen": [
        "'Delivered At' column is visible and functional on the Parcels page."
      ],
      "durationHours": 3
    },
    {
      "id": "step-ui-3",
      "title": "Modify TableRenderer for 'Delivered At' column",
      "description": "Update the TableRenderer component to support the new 'Delivered At' column.",
      "area": "UI",
      "kind": "modify",
      "files": {
        "modify": [
          "src/components/table/TableRenderer.tsx"
        ],
        "create": [],
        "touch": [
          "src/pages/Parcels.tsx"
        ]
      },
      "dependsOnStepIds": [
        "step-ui-2"
      ],
      "rationale": [
        "TableRenderer needs to support the new column for consistent table behavior."
      ],
      "implementationChecklist": [
        "Update TableRenderer to include 'Delivered At' in column definitions.",
        "Ensure the column supports sorting and filtering."
      ],
      "doneWhen": [
        "TableRenderer correctly displays and handles the 'Delivered At' column."
      ],
      "durationHours": 2
    },
    {
      "id": "step-tests-1",
      "title": "Add tests for 'Delivered At' column and Edit functionality",
      "description": "Create tests to ensure the new 'Delivered At' column and Edit functionality work as expected.",
      "area": "Tests",
      "kind": "test",
      "files": {
        "modify": [
          "src/test/example.test.ts"
        ],
        "create": [],
        "touch": [
          "src/pages/Parcels.tsx",
          "src/pages/EditParcel.tsx"
        ]
      },
      "dependsOnStepIds": [
        "step-ui-3",
        "step-ui-1"
      ],
      "rationale": [
        "Tests are needed to verify the correct implementation of new features."
      ],
      "implementationChecklist": [
        "Write tests for the 'Delivered At' column display, sorting, and filtering.",
        "Write tests for the Edit Parcel screen functionality and permissions."
      ],
      "doneWhen": [
        "All tests pass and cover the new features comprehensively."
      ],
      "durationHours": 3
    }
  ],
  "artifacts": {
    "filesToModify": [
      "src/types/parcel.ts",
      "src/services/parcelAPI.ts",
      "src/redux/slices/AuthSlice.ts",
      "src/hooks/useAuthorization.ts",
      "src/config/navigation.ts",
      "src/pages/Parcels.tsx",
      "src/components/table/TableRenderer.tsx",
      "src/test/example.test.ts"
    ],
    "filesAffected": [
      "src/types/parcel.ts",
      "src/hooks/useAuthorization.ts",
      "src/redux/slices/AuthSlice.ts",
      "src/pages/EditParcel.tsx",
      "src/components/authorize/Authorize.tsx",
      "src/components/table/TableRenderer.tsx",
      "src/pages/Parcels.tsx"
    ],
    "filesToCreate": [
      "src/pages/EditParcel.tsx"
    ],
    "dependencies": []
  },
  "acceptanceCriteria": [
    "All TypeScript compilation errors are resolved (tsc exits 0)",
    "All existing tests continue to pass after changes",
    "New functionality matches PRD requirements"
  ],
  "verification": [
    {
      "type": "typecheck",
      "instructions": [
        "Run: npx tsc --noEmit",
        "Expected: 0 errors"
      ]
    },
    {
      "type": "lint",
      "instructions": [
        "Run: npx eslint src --ext .ts,.tsx",
        "Expected: 0 errors"
      ]
    },
    {
      "type": "unit_test",
      "instructions": [
        "Run: npm test",
        "Expected: all tests pass"
      ]
    }
  ],
  "risks": [
    {
      "severity": "medium",
      "risk": "Moderate blast radius: 16 files",
      "mitigation": [
        "Incremental testing after each subtask"
      ]
    }
  ],
  "openQuestions": [],
  "notes": [
    "Generated by OpenAIEngine (gpt-4o)",
    "9 implementation subtasks across 7 areas",
    "Total estimated duration: 18.5 hours"
  ]
}